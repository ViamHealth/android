
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'></script>

    <script type="text/javascript">
        function addPoint(data) {
            data = JSON.parse(data);
            var chart = $('#container').highcharts();
            var seriesA = chart.get("seriesA");
            var seriesB = chart.get("seriesB");
            var seriesC = chart.get("seriesC");
            seriesA.addPoint(data.seriesA);
            seriesB.addPoint(data.seriesB);
            seriesC.addPoint(data.seriesC);
        }
    </script>


    <script type='text/javascript'>//<![CDATA[
var str = goals.getData();
console.log(str);
var android = JSON.parse(str);
console.log(android);
/*var android = { "seriesA": [
        {
        "y": 50,
        "x": 1382293800000
        },
        {
        "y": 45,
        "x": 1382955119000
        },
        {
        "y": 48,
        "x": 1384769519000
        }
],
        "seriesB": [
        {
        "y": 120,
        "x": 1382293800000
        },
        {
        "y": 140,
        "x": 1382955119000
        },
        {
        "y": 150,
        "x": 1384769519000
        }


        ],
        "goal": {
        "targetHDL": 65,
        "healthyRange": {
        "total": {
        "to": 0,
        "from": 0
        },
        "tg": {
        "to": 100,
        "from": 0
        },
        "hdl": {
        "tp": 70,
        "from": 50
        },
        "ldl": {
        "to": 100,
        "from": 0
        }
        },
        "targetTotal": 0,
        "targetLDL": 100,
        "targetTri": 100,
        "targetDate": 1384972200000
        },
        "seriesC": [
        {
        "y": 200,
        "x": 1382293800000
        },
        {
        "y": 220,
        "x": 1382955119000
        },
        {
        "y": 150,
        "x": 1384769519000
        }

        ],
        "seriesD": [
        {
        "y": 210,
        "x": 1382293800000
        },
        {
        "y": 229,
        "x": 1382955119000
        },
        {
        "y": 228,
        "x": 1384769519000
        }

        ]

        };*/
$(function () {
        $('#container').highcharts({
            chart: {
                type: 'column',
                events: {
                        click: function(e) {
                            goals.addValue();
                        }
                }
            },
            title: {
                text: 'Cholesterol'
            },
            colors: [
                '#37AA4F',
                '#38BB5F',
                '#39CC6F',
                '#000000'
            ],
            xAxis: {
            type: 'datetime',
            title: {
                text: "Timeline"
            },
            //max: android.goal.targetDate,
            plotLines: [{
                value: android.goal.targetDate,
                width: 2,
                color: '#37AA4F',
                label: {
                    text: 'Target Date',
                    textAlign: 'top',
                    align: 'top',
                    x: -15,
                    y: 0
                },
                dashStyle: "ShortDash",
                zIndex: 2
            }]

            },
            yAxis: {
                title: {
                    text: ""
                },
                min: android.yAxis.min,
                max: android.yAxis.max,
                stackLabels: {
                    enabled: true,
                    style: {
                        fontWeight: 'bold',
                        color: (Highcharts.theme && Highcharts.theme.textColor) || 'gray'
                    }
                }

            },
            legend: {
                enabled: false
            },
            tooltip: {
                formatter: function() {
                    return '<b>'+ new Date(this.x) +'</b><br/>'+
                        this.series.name +': '+ this.y +'<br/>'+
                        'Total: '+ this.point.stackTotal;
                }
            },
            plotOptions: {
                column: {
                    stacking: 'normal',
                    dataLabels: {
                        enabled: true,
                        color: (Highcharts.theme && Highcharts.theme.dataLabelsColor) || 'white'
                    }
                }
            },
            plotOptions: {
                series: {
                    cursor: 'pointer',
                    point: {
                        events: {
                            click: function() {
                                //alert ('Category: '+ this.x +', value: '+ this.y);
                                goals.onItemClick(this.x);
                            }
                        }
                    }
                }
            },
            series: [{
                name: 'HDL',
                data: android.seriesA
            }, {
                name: 'LDL',
                data: android.seriesB
            }, {
                name: 'Triglycerides',
                data: android.seriesC
            }]
        });
    });
//]]>

</script>


</head>
<body>
<script src="http://code.highcharts.com/highcharts.js"></script>

<div id="container"></div>

</body>


</html>

